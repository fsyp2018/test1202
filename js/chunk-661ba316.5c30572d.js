(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-661ba316"],{"6ea0":function(e,t,r){},"812f":function(e,t,r){"use strict";t["a"]="https://www.sinetics.com.tw/"},"839b":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("nav",{staticClass:"navbar navbar-expand-sm navbar-light fixed-top itdmnav d-block"},[r("div",[r("div",{staticClass:"d-flex flex-nowrap justify-content-between align-items-center"},[r("div",{staticClass:"d-flex"},[r("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.backtrack(t)}}},[r("i",{staticClass:"fa fa-arrow-left fa-lg",attrs:{"aria-hidden":"true"}})]),r("div",{staticClass:"minilogo"}),r("h5",[r("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[e._v(e._s(e.currentuser.fullname))])])]),r("div",[r("button",{staticClass:"btn",on:{click:function(t){return t.preventDefault(),e.backlogin(t)}}},[e._v(" 回登入畫面"),r("i",{staticClass:"fa fa-arrow-right fa-lg",attrs:{"aria-hidden":"true"}})])])])])]),r("main",[r("div",{staticClass:"content_wrapper",staticStyle:{"align-items":"start"}},[r("div",{staticClass:"\n          job_wrapper\n          col col-sm-8 col-md-6 col-lg-3 col-xl-4\n          container-fluid container-sm\n        "},[r("form",{staticClass:"job_form col"},[r("p",{staticClass:"error"},[e._v(e._s(e.error))]),r("qrcode-stream",{on:{decode:e.onDecode,init:e.onInit}}),"OverTimeOn"===e.result?r("p",{staticClass:"decode-result"},[e._v(" 掃描結果: "),r("b",[e._v("已進入")])]):e._e(),"OverTimeOff"===e.result?r("p",{staticClass:"decode-result"},[e._v(" 掃描結果: "),r("b",[e._v("結束加班")])]):e._e(),"OverTimeOn"===e.result?r("div",[r("form",[r("div",{staticClass:"form-row"},[r("div",{staticClass:"col"},[e._m(0),""===e.username.roomno?r("span",{staticClass:"ml-5 text-danger",class:{hidden:e.prompt}},[e._v("請輸入位置")]):e._e(),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.username.roomno,expression:"username.roomno",modifiers:{trim:!0}}],staticClass:"form-control",class:[""===e.username.roomno&&{"border-danger":!e.prompt}],attrs:{type:"text",maxlength:"40",id:"validationDefault01",required:""},domProps:{value:e.username.roomno},on:{input:function(t){t.target.composing||e.$set(e.username,"roomno",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col"},[r("label",{attrs:{for:"validationDefault03"}},[e._v("電話")]),""===e.username.telno?r("span",{staticClass:"ml-5 text-danger",class:{hidden:e.prompt}},[e._v("請輸入電話")]):e._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:e.username.telno,expression:"username.telno"}],staticClass:"form-control",class:[""===e.username.telno&&{"border-danger":!e.prompt}],attrs:{type:"text",maxlength:"12",id:"validationDefault03",required:""},domProps:{value:e.username.telno},on:{input:function(t){t.target.composing||e.$set(e.username,"telno",t.target.value)}}})])]),r("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.done(t)}}},[e._v(" 輸入 ")])])]):e._e(),r("div",{staticClass:"error-message alert text-center",class:{hidden:e.forget},staticStyle:{position:"static","margin-bottom":"0"}},[e._v(" "+e._s(e.hintmsg)+" ")]),r("button",{staticClass:"btn btn-primary btn-block",class:{hidden:e.showextend},attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.extend(t)}}},[e._v(" 延長加班 ")])],1)])])])])},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("label",{attrs:{for:"validationDefault01"}},[e._v("位置 "),r("small",[e._v("例如：M201;M301")])])}],o=(r("b0c0"),r("5530")),s=(r("96cf"),r("1da1")),i=r("b635"),c=r("2f62"),l=r("812f"),u={components:{QrcodeStream:i["a"]},data:function(){return{result:"",error:"",username:{username:"",roomno:"",telno:""},hintmsg:"",forget:!0,prompt:!0,showextend:!0}},methods:{onDecode:function(e){var t=this;switch(t.result=e,t.result){case"OverTimeOn":break;case"OverTimeOff":var r=l["a"]+"ITDMLIMSAPI/DAC/SetOverTimeOff";this.$http.post(r,t.username).then((function(e){0===e.data.overtime&&(t.hintmsg="加班結束",t.forget=!1)})).catch((function(e){console.log(e)}));break;default:var n=l["a"]+"ITDMLIMSAPI/DAC/SetDAC",a={username:t.username.username,roomno:t.result};this.$http.post(n,a).then((function(e){t.hintmsg="掃描成功，進入"+e.data.roomno,t.forget=!1})).catch((function(e){console.log(e),t.hintmsg="掃描失敗，請重掃描",t.forget=!1}));break}},onInit:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e;case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),"NotAllowedError"===r.t0.name?t.error="ERROR: you need to grant camera access permisson":"NotFoundError"===r.t0.name?t.error="ERROR: no camera on this device":"NotSupportedError"===r.t0.name?t.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===r.t0.name?t.error="ERROR: is the camera already in use?":"OverconstrainedError"===r.t0.name?t.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===r.t0.name&&(t.error="ERROR: Stream API is not supported in this browser");case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},backtrack:function(){var e=this;e.$router.push("/SelMenu")},backlogin:function(){var e=this;e.$router.push("/")},done:function(){var e=this;if(e.username.roomno&&e.username.telno){var t=l["a"]+"ITDMLIMSAPI/DAC/SetOverTimeOn";this.$http.post(t,e.username).then((function(t){1===t.data.overtime&&(e.result="",e.hintmsg="加班開始",e.forget=!1,e.prompt=!0)})).catch((function(e){console.log(e)}))}else e.prompt=!1},CheckOverTimeOn:function(){var e=this,t=l["a"]+"ITDMLIMSAPI/DAC/GetOverTimeLog",r={username:e.username.username};this.$http.post(t,r).then((function(t){1===t.data[0].overtime&&(e.showextend=!1,e.username.roomno=t.data[0].roomno,e.username.telno=t.data[0].telno)})).catch((function(e){console.log(e)}))},extend:function(){var e=this;e.showextend=!0,e.result="OverTimeOn"}},watch:{forget:function(){var e=this;setTimeout((function(){e.forget=!0}),3e3)}},computed:Object(o["a"])({},Object(c["c"])(["currentuser"])),created:function(){var e=this;e.username.username=e.currentuser.username,e.CheckOverTimeOn()}},m=u,d=(r("98d9"),r("2877")),f=Object(d["a"])(m,n,a,!1,null,"15eda40e",null);t["default"]=f.exports},"98d9":function(e,t,r){"use strict";r("6ea0")}}]);
//# sourceMappingURL=chunk-661ba316.5c30572d.js.map