(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dcf0f01e"],{"0b19":function(t,e,r){"use strict";r("4871")},4871:function(t,e,r){},"812f":function(t,e,r){"use strict";e["a"]="https://www.sinetics.com.tw/"},"839b":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("nav",{staticClass:"navbar navbar-expand-sm navbar-light fixed-top itdmnav d-block"},[r("div",[r("div",{staticClass:"d-flex flex-nowrap justify-content-between align-items-center"},[r("div",{staticClass:"d-flex"},[r("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.backtrack(e)}}},[r("i",{staticClass:"fa fa-arrow-left fa-lg",attrs:{"aria-hidden":"true"}})]),r("div",{staticClass:"minilogo"}),r("h5",[r("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v(t._s(t.currentuser.fullname))])])]),r("div",[r("button",{staticClass:"btn",on:{click:function(e){return e.preventDefault(),t.backlogin(e)}}},[t._v(" 回登入畫面"),r("i",{staticClass:"fa fa-arrow-right fa-lg",attrs:{"aria-hidden":"true"}})])])])])]),r("main",[r("div",{staticClass:"content_wrapper",staticStyle:{"align-items":"start"}},[r("div",{staticClass:"\n          job_wrapper\n          col col-sm-8 col-md-6 col-lg-3 col-xl-4\n          container-fluid container-sm\n        "},[r("form",{staticClass:"job_form col"},[r("p",{staticClass:"error"},[t._v(t._s(t.error))]),r("qrcode-stream",{on:{decode:t.onDecode,init:t.onInit}}),r("p",{staticClass:"decode-result"},[t._v(" 掃描結果: "),r("b",[t._v(t._s(t.result))])]),"OverTimeOn"===t.result?r("div",[r("form",[r("div",{staticClass:"form-row"},[r("div",{staticClass:"col"},[t._m(0),""===t.username.roomno?r("span",{staticClass:"ml-5 text-danger",class:{hidden:t.prompt}},[t._v("請輸入位置")]):t._e(),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username.roomno,expression:"username.roomno",modifiers:{trim:!0}}],staticClass:"form-control",class:[""===t.username.roomno&&{"border-danger":!t.prompt}],attrs:{type:"text",maxlength:"40",id:"validationDefault01",required:""},domProps:{value:t.username.roomno},on:{input:function(e){e.target.composing||t.$set(t.username,"roomno",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"form-row"},[r("div",{staticClass:"col"},[r("label",{attrs:{for:"validationDefault03"}},[t._v("電話")]),""===t.username.telno?r("span",{staticClass:"ml-5 text-danger",class:{hidden:t.prompt}},[t._v("請輸入電話")]):t._e(),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username.telno,expression:"username.telno"}],staticClass:"form-control",class:[""===t.username.telno&&{"border-danger":!t.prompt}],attrs:{type:"text",maxlength:"12",id:"validationDefault03",required:""},domProps:{value:t.username.telno},on:{input:function(e){e.target.composing||t.$set(t.username,"telno",e.target.value)}}})])]),r("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.done(e)}}},[t._v(" 輸入 ")])])]):t._e(),r("div",{staticClass:"error-message alert text-center",class:{hidden:t.forget},staticStyle:{position:"static","margin-bottom":"0"}},[t._v(" "+t._s(t.hintmsg)+" ")]),r("button",{staticClass:"btn btn-primary btn-block",class:{hidden:t.showextend},attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.extend(e)}}},[t._v(" 延長加班 ")])],1)])])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("label",{attrs:{for:"validationDefault01"}},[t._v("位置 "),r("small",[t._v("例如：M201;M301")])])}],o=(r("b0c0"),r("5530")),s=(r("96cf"),r("1da1")),i=r("b635"),c=r("2f62"),l=r("812f"),u={components:{QrcodeStream:i["a"]},data:function(){return{result:"",error:"",username:{username:"",roomno:"",telno:""},hintmsg:"",forget:!0,prompt:!0,showextend:!0}},methods:{onDecode:function(t){var e=this;switch(e.result=t,e.result){case"OverTimeOn":break;case"OverTimeOff":var r=l["a"]+"ITDMLIMSAPI/DAC/SetOverTimeOff";this.$http.post(r,e.username).then((function(t){0===t.data.overtime&&(e.hintmsg="加班結束",e.forget=!1)})).catch((function(t){console.log(t)}));break;default:var n=l["a"]+"ITDMLIMSAPI/DAC/SetDAC",a={username:e.username.username,roomno:e.result};this.$http.post(n,a).then((function(t){e.hintmsg="掃描成功，進入"+t.data.roomno,e.forget=!1})).catch((function(t){console.log(t),e.hintmsg="掃描失敗，請重掃描",e.forget=!1}));break}},onInit:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t;case 3:r.next=8;break;case 5:r.prev=5,r.t0=r["catch"](0),"NotAllowedError"===r.t0.name?e.error="ERROR: you need to grant camera access permisson":"NotFoundError"===r.t0.name?e.error="ERROR: no camera on this device":"NotSupportedError"===r.t0.name?e.error="ERROR: secure context required (HTTPS, localhost)":"NotReadableError"===r.t0.name?e.error="ERROR: is the camera already in use?":"OverconstrainedError"===r.t0.name?e.error="ERROR: installed cameras are not suitable":"StreamApiNotSupportedError"===r.t0.name&&(e.error="ERROR: Stream API is not supported in this browser");case 8:case"end":return r.stop()}}),r,null,[[0,5]])})))()},backtrack:function(){var t=this;t.$router.push("/SelMenu")},backlogin:function(){var t=this;t.$router.push("/")},done:function(){var t=this;if(t.username.roomno&&t.username.telno){var e=l["a"]+"ITDMLIMSAPI/DAC/SetOverTimeOn";this.$http.post(e,t.username).then((function(e){1===e.data.overtime&&(t.result="",t.hintmsg="加班開始",t.forget=!1,t.prompt=!0)})).catch((function(t){console.log(t)}))}else t.prompt=!1},CheckOverTimeOn:function(){var t=this,e=l["a"]+"ITDMLIMSAPI/DAC/GetOverTimeLog",r={username:t.username.username};this.$http.post(e,r).then((function(e){1===e.data[0].overtime&&(t.showextend=!1)})).catch((function(t){console.log(t)}))},extend:function(){var t=this;t.showextend=!0,t.result="OverTimeOn"}},watch:{forget:function(){var t=this;setTimeout((function(){t.forget=!0}),3e3)}},computed:Object(o["a"])({},Object(c["c"])(["currentuser"])),created:function(){var t=this;t.username.username=t.currentuser.username,t.CheckOverTimeOn()}},m=u,d=(r("0b19"),r("2877")),f=Object(d["a"])(m,n,a,!1,null,"57f08eba",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-dcf0f01e.c81f9cb0.js.map